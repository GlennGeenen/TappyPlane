!function(){"use strict";function t(){}t.prototype={preload:function(){this.load.image("preloader","assets/preloader.gif")},create:function(){this.game.input.maxPointers=1,this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=1920,this.game.scale.maxHeight=1080,this.game.scale.pageAlignHorizontally=!0,this.game.scale.setScreenSize(!0),this.game.state.start("preloader")}},window.tappyplane=window.tappyplane||{},window.tappyplane.Boot=t}(),function(){"use strict";function t(){this.player=null,this.blocks=null,this.emitter=null,this.lastX=0,this.lastY=0,this.playerY=2}t.prototype={create:function(){this.gameOver=!1,this.physics.startSystem(Phaser.Physics.ARCADE),this.add.sprite(0,0,"background"),this.createPlane(),this.createBlocks(),this.createEmitter(),this.createInterface(),this.time.events.loop(250,this.updateScore,this),this.input.onDown.add(this.onInputDown,this),this.input.onUp.add(this.onInputUp,this)},createPlane:function(){this.player=this.add.sprite(200,.5*this.game.height,"plane"),this.player.anchor.set(.5),this.player.animations.add("fly"),this.player.animations.play("fly",50,!0),this.physics.enable(this.player,Phaser.Physics.ARCADE)},createEmitter:function(){this.emitter=this.add.emitter(this.player.x,this.player.y,100),this.emitter.makeParticles("puffSmall"),this.emitter.setXSpeed(-200,-100),this.emitter.setYSpeed(-5,5),this.emitter.emitX=this.player.x-40,this.emitter.emitY=this.player.y,this.emitter.start(!1,4e3,100)},createBlocks:function(){this.blocks=this.add.group(),this.lastX=0,this.lastY=200+100*Math.random();for(var t=0;23>t;++t){this.lastX=50*t,this.computeNextY(),4===t&&(this.player.y=this.lastY+150);var e=this.blocks.create(this.lastX,this.lastY,"block");e.anchor.setTo(.5,1),e=this.blocks.create(this.lastX,this.lastY+(250+150*Math.random()),"block"),e.anchor.setTo(.5,0)}},createInterface:function(){this.score=0;var t={font:"100px Arial",fill:"#ffe200",align:"center"};this.scoreText=this.add.text(20,20,this.score,t)},update:function(){this.gameOver||(this.player.body.velocity.y+=this.playerY,this.player.angle=.1*this.player.body.velocity.y,this.emitter.emitY=this.player.y,this.updateBlocks())},computeNextY:function(){this.lastY+50>=500?this.lastY-=50:this.lastY<=50?this.lastY+=50:Math.floor(2*Math.random())%2===0?this.lastY-=50:this.lastY+=50},updateBlocks:function(){var t=-2,e=!1,s=!1;this.lastX+=t,this.blocks.forEach(function(i){if(i.x+=t,i.x<-50)e||(e=!0,this.computeNextY()),i.x=this.lastX+50,i.y=0===i.anchor.y?this.lastY+(250+150*Math.random()):this.lastY;else{var a=this.player.x-i.x;3025>a*a&&(1===i.anchor.y&&i.y>this.player.y-30?s=!0:0===i.anchor.y&&i.y<this.player.y+30&&(s=!0))}},this),e&&(this.lastX+=50),s&&this.onCollision()},updateScore:function(){this.scoreText.text=++this.score},onCollision:function(){this.explodePlane(),this.emitter.kill(),this.player.kill(),this.gameOver=!0,this.time.events.add(2500,this.onGameOver,this)},explodePlane:function(){var t=this.add.sprite(this.player.x,this.player.y,"explosion");t.anchor.set(.5),this.time.events.removeAll(),this.time.events.add(3e3,this.onGameOver,this)},onInputDown:function(){this.playerY=-2},onInputUp:function(){this.playerY=2},onGameOver:function(){this.game.state.states.menu.score=this.score,this.game.state.start("menu")}},window.tappyplane=window.tappyplane||{},window.tappyplane.Game=t}(),window.onload=function(){"use strict";var t,e=window.tappyplane;t=new Phaser.Game(1024,768,Phaser.AUTO,"tappyplane-game"),t.state.add("boot",e.Boot),t.state.add("preloader",e.Preloader),t.state.add("menu",e.Menu),t.state.add("game",e.Game),t.state.start("boot")},function(){"use strict";function t(){this.titleTxt=null,this.startTxt=null,this.score=0,this.highScore=0}t.prototype={create:function(){this.addTitles(),this.addScore(),this.input.onDown.add(this.onDown,this)},addTitles:function(){var t=this.add.text(.5*this.game.width,200,"tap/click",{font:"42px Arial",fill:"#ffffff",align:"center"});t.anchor.set(.5),t=this.add.text(.5*this.game.width,100,"TappyPlane",{font:"68px Arial",fill:"#ffe200",align:"center"}),t.anchor.set(.5),t=this.add.text(.333*this.game.width,500,"High Score",{font:"48px Arial",fill:"#ffe200",align:"center"}),t.anchor.set(.5),t=this.add.text(.666*this.game.width,500,"Your Score",{font:"48px Arial",fill:"#ffe200",align:"center"}),t.anchor.set(.5)},addScore:function(){localStorage.HighScore&&(this.highScore=localStorage.HighScore),this.score>this.highScore&&(localStorage.HighScore=this.score,this.highScore=this.score);var t={font:"42px Arial",fill:"#ffffff",align:"center"},e=this.add.text(.333*this.game.width,560,this.highScore,t);e.anchor.set(.5),e=this.add.text(.666*this.game.width,560,this.score,t),e.anchor.set(.5)},update:function(){},onDown:function(){this.game.state.start("game")}},window.tappyplane=window.tappyplane||{},window.tappyplane.Menu=t}(),function(){"use strict";function t(){this.asset=null,this.ready=!1}t.prototype={preload:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.asset.anchor.setTo(.5,.5),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.load.setPreloadSprite(this.asset),this.loadResources()},loadResources:function(){this.load.image("background","assets/background.png"),this.load.image("block","assets/block.png"),this.load.image("puffSmall","assets/puffSmall.png"),this.load.image("explosion","assets/explosion.png"),this.load.spritesheet("plane","assets/plane.png",88,73,3)},create:function(){this.asset.cropEnabled=!1},update:function(){this.ready&&this.game.state.start("menu")},onLoadComplete:function(){this.ready=!0}},window.tappyplane=window.tappyplane||{},window.tappyplane.Preloader=t}();